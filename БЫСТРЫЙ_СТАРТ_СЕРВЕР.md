# âš¡ Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚: Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð·Ð° 15 Ð¼Ð¸Ð½ÑƒÑ‚

## Ð”Ð»Ñ Ñ‚ÐµÑ…, ÐºÑ‚Ð¾ Ñ…Ð¾Ñ‡ÐµÑ‚ Ð±Ñ‹ÑÑ‚Ñ€Ð¾!

Ð•ÑÐ»Ð¸ Ñ‚Ñ‹ ÑƒÐ¶Ðµ Ð·Ð½Ð°ÐºÐ¾Ð¼ Ñ Linux Ð¸Ð»Ð¸ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ñ…Ð¾Ñ‡ÐµÑˆÑŒ Ð±Ñ‹ÑÑ‚Ñ€Ð¾ Ñ€Ð°Ð·Ð²ÐµÑ€Ð½ÑƒÑ‚ÑŒ ÑÐ°Ð¹Ñ‚, ÑÐ»ÐµÐ´ÑƒÐ¹ ÑÑ‚Ð¾Ð¹ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¾Ð¹ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¸.

---

## ðŸ”‘ ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº ÑÐµÑ€Ð²ÐµÑ€Ñƒ

```bash
ssh root@38.242.128.68
# ÐŸÐ°Ñ€Ð¾Ð»ÑŒ: jb2Wqw8RaJ7d
```

---

## ðŸš€ ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 1: Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÑ ÑÐºÑ€Ð¸Ð¿Ñ‚ (Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ)

**ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ:**

```bash
# Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ ÑÐºÑ€Ð¸Ð¿Ñ‚ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ
cd /root
wget https://raw.githubusercontent.com/YOUR_REPO/deploy.sh
# Ð¸Ð»Ð¸ ÑÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹ Ñ„Ð°Ð¹Ð» deploy.sh Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
bash deploy.sh
```

Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð¿Ð¾Ð¿Ñ€Ð¾ÑÐ¸Ñ‚ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ SCP:

**ÐÐ° Ñ‚Ð²Ð¾ÐµÐ¼ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ðµ (PowerShell):**

```powershell
cd "C:\Users\user\Desktop\DMT_prod\DMT_serv\DMT_cursor-v7(serv)"
scp -r * root@38.242.128.68:/var/www/dmt.expert/
```

---

### Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 2: Ð’Ñ€ÑƒÑ‡Ð½ÑƒÑŽ (10 ÐºÐ¾Ð¼Ð°Ð½Ð´)

**ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð²Ñ‹Ð¿Ð¾Ð»Ð½Ð¸ Ð¿Ð¾ Ð¿Ð¾Ñ€ÑÐ´ÐºÑƒ:**

```bash
# 1. ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¸ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°
apt update && apt upgrade -y
apt install -y python3 python3-pip python3-venv nginx git certbot python3-certbot-nginx ufw

# 2. Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ñ‹
mkdir -p /var/www/dmt.expert
cd /var/www/dmt.expert
```

**Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹ Ñ„Ð°Ð¹Ð»Ñ‹ Ñ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ð°:**

```powershell
# ÐÐ° Ñ‚Ð²Ð¾ÐµÐ¼ Windows
scp -r * root@38.242.128.68:/var/www/dmt.expert/
```

**ÐŸÑ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ:**

```bash
# 3. Python Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ðµ
cd /var/www/dmt.expert
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt gunicorn

# 4. ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ
cat > .env << EOF
FLASK_ENV=production
SECRET_KEY=$(python3 -c 'import secrets; print(secrets.token_hex(32))')
EOF

# 5. Systemd ÑÐ»ÑƒÐ¶Ð±Ð°
cat > /etc/systemd/system/dmt.service << 'EOF'
[Unit]
Description=DMT Document Generation Service
After=network.target

[Service]
User=root
Group=root
WorkingDirectory=/var/www/dmt.expert
Environment="PATH=/var/www/dmt.expert/venv/bin"
Environment="FLASK_ENV=production"
ExecStart=/var/www/dmt.expert/venv/bin/gunicorn --workers 3 --bind 127.0.0.1:5000 app:app
Restart=always

[Install]
WantedBy=multi-user.target
EOF

systemctl daemon-reload
systemctl start dmt
systemctl enable dmt

# 6. Nginx ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ
cat > /etc/nginx/sites-available/dmt.expert << 'EOF'
server {
    listen 80;
    server_name dmt.expert www.dmt.expert;
    client_max_body_size 20M;

    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
EOF

ln -sf /etc/nginx/sites-available/dmt.expert /etc/nginx/sites-enabled/
rm -f /etc/nginx/sites-enabled/default
nginx -t && systemctl restart nginx

# 7. Firewall
ufw --force enable
ufw allow OpenSSH
ufw allow 'Nginx Full'

# 8. Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸
mkdir -p logs created_docx /backups
```

---

## ðŸŒ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° DNS

**Ð’ Ð¿Ð°Ð½ÐµÐ»Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð´Ð¾Ð¼ÐµÐ½Ð¾Ð¼:**

| Ð¢Ð¸Ð¿ | Ð˜Ð¼Ñ | Ð—Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ | TTL |
|-----|-----|----------|-----|
| A   | @   | 38.242.128.68 | 3600 |
| A   | www | 38.242.128.68 | 3600 |

**ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° (Ð½Ð° Ñ‚Ð²Ð¾ÐµÐ¼ ÐºÐ¾Ð¼Ð¿ÑŒÑŽÑ‚ÐµÑ€Ðµ):**

```powershell
nslookup dmt.expert
```

Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ð¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ: `38.242.128.68`

â³ **ÐŸÐ¾Ð´Ð¾Ð¶Ð´Ð¸ 15-30 Ð¼Ð¸Ð½ÑƒÑ‚** Ð¿Ð¾ÐºÐ° DNS Ð¾Ð±Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ.

---

## ðŸ” SSL ÑÐµÑ€Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚

**ÐŸÐ¾ÑÐ»Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ DNS (Ð²Ð°Ð¶Ð½Ð¾!):**

```bash
certbot --nginx -d dmt.expert -d www.dmt.expert
```

ÐžÑ‚Ð²ÐµÑ‚ÑŒ Ð½Ð° Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹:
- Email: Ñ‚Ð²Ð¾Ñ Ð¿Ð¾Ñ‡Ñ‚Ð°
- Ð¡Ð¾Ð³Ð»Ð°ÑÐ¸Ðµ: Y
- ÐÐ¾Ð²Ð¾ÑÑ‚Ð¸: N
- Redirect: 2

---

## âœ… ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°

```bash
# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ ÑÐ»ÑƒÐ¶Ð±
systemctl status dmt
systemctl status nginx

# ÐžÑ‚ÐºÑ€Ð¾Ð¹ Ð² Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ðµ
https://dmt.expert
```

---

## ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ (Ð² Ð±ÑƒÐ´ÑƒÑ‰ÐµÐ¼)

```bash
cd /var/www/dmt.expert
source venv/bin/activate
# Ð¡ÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹ Ð½Ð¾Ð²Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ñ‡ÐµÑ€ÐµÐ· SCP
pip install -r requirements.txt
systemctl restart dmt
```

Ð˜Ð»Ð¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÑÐºÑ€Ð¸Ð¿Ñ‚:

```bash
bash /var/www/dmt.expert/update.sh
```

---

## ðŸ› ï¸ ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹

```bash
# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÐº
systemctl restart dmt

# Ð›Ð¾Ð³Ð¸
journalctl -u dmt -f

# Ð¡Ñ‚Ð°Ñ‚ÑƒÑ
systemctl status dmt nginx

# Ð‘ÑÐºÐ°Ð¿
tar -czf /backups/backup-$(date +%Y%m%d).tar.gz /var/www/dmt.expert
```

---

## ðŸš¨ Ð•ÑÐ»Ð¸ Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

### Ð¡Ð°Ð¹Ñ‚ Ð½Ðµ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ

```bash
# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÐ»ÑƒÐ¶Ð±Ñ‹
systemctl status dmt nginx

# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
systemctl restart dmt nginx

# Ð›Ð¾Ð³Ð¸
journalctl -u dmt -n 50
```

### 502 Bad Gateway

```bash
systemctl restart dmt
netstat -tulpn | grep 5000
```

### 500 Internal Server Error

```bash
journalctl -u dmt -n 100
```

---

## ðŸ“ž ÐŸÐ¾Ð»ÐµÐ·Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹

- **ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½Ð°Ñ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ñ:** `Ð˜ÐÐ¡Ð¢Ð Ð£ÐšÐ¦Ð˜Ð¯_Ð ÐÐ—Ð’Ð•Ð Ð¢Ð«Ð’ÐÐÐ˜Ð¯_ÐÐ_Ð¡Ð•Ð Ð’Ð•Ð Ð•.md`
- **ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹:** `server_commands.md`
- **Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ:** `update.sh`

---

## ðŸŽ‰ Ð“Ð¾Ñ‚Ð¾Ð²Ð¾!

Ð¢Ð²Ð¾Ð¹ ÑÐ°Ð¹Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð° **https://dmt.expert**

Ð’Ñ€ÐµÐ¼Ñ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ: **10-15 Ð¼Ð¸Ð½ÑƒÑ‚** + Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ðµ DNS (15-30 Ð¼Ð¸Ð½ÑƒÑ‚)


